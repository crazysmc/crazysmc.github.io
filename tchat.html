<!DOCTYPE html>
<meta charset=utf8>
<title>crazysmc – tChat</title>
<link rel=stylesheet href=yeet.css>

<h1>tChat – Twitch chat overlay for OBS or browser</h1>

<p>Highly customisable chat reader with support for Pronouns.Alejo.io;
BetterTTV emotes, badges, glow and live updates;
FrankerFaceZ emotes and badges; as well as
7TV emotes, badges, name paints and live updates.
This also includes emote effects like <em>w!</em> or <em>ffzX</em>.

<p>Mod actions like deleting a message or clearing the chat are actioned as
soon as possible.
Announcements and sub messages are highlighted by default.

<hr>

<h2>Options</h2>

<form name=tchat>

<p>
<input id=join name=join size=40 />
<label for=join>
  Channel(s) to join (if multiple, separate with white-space)
</label>

<p>
<input id=time name=time type=number min=0 step=60 size=4 />
<label for=time>
  Time in seconds until each message disappears again (if unset, only messages
  scrolling out the top will be removed)
</label>

<fieldset>
<legend>Image Options</legend>

<p>
<select id=scale name=scale>
  <option value=1>1.0</option>
  <option value=2>2.0</option>
  <option value=3>3.0</option>
</select>
<label for=scale>
  Size of the emotes and badges to load (adapt your font size in CSS if you
  want large scales to not look broken)
</label>

<p>
<input id=static name=static type=checkbox />
<label for=static>
  Replace animated emotes, badges and paints with static ones
</label>

</fieldset>

<fieldset>
<legend>Natively Hidden Details</legend>

<p>
<input id=bans name=bans type=checkbox />
<label for=bans>
  Show a notice when someone was banned/timed out (messages are still deleted
  from the chat)
</label>

<p>
<input id=chatters name=chatters type=checkbox />
<label for=chatters>
  Show chatters joining and parting from chat (not received in chats with more
  than 1,000 chatters)
</label>

</fieldset>

<fieldset>
<legend>Disable Cool Features?</legend>

<p>
<input id=noPronouns name=noPronouns type=checkbox />
<label for=noPronouns>
  Disable Pronouns.Alejo.io
</label>

<p>
<input id=noBttv name=noBttv type=checkbox />
<label for=noBttv>
  Disable BetterTTV
</label>

<p>
<input id=noFfz name=noFfz type=checkbox />
<label for=noFfz>
  Disable FrankerFaceZ
</label>

<p>
<input id=no7tv name=no7tv type=checkbox />
<label for=no7tv>
  Disable 7TV
</label>

</fieldset>

<p>
<output name=url style="background:#5f5">.</output>

</form>

<hr>

<h2>Custom Styles</h2>

<p>The structure of the document generated by the chat overlay should allow
for great customisability using added CSS snippets.

<p>Adding a new browser source in OBS will give you a default CSS that looks
like this:

<blockquote>
  body {
  background-color: rgba(0, 0, 0, 0);
  margin: 0px auto;
  overflow: hidden; }
</blockquote>

<p>This will make the overlay transparent and make sure it has no scrollbars.

<p>You can add more CSS rules to this; here are some examples:

<ul>

<li>Change the font of the page, for example to a monospace one
  <blockquote>
    @import
    url('https://fonts.googleapis.com/css2?<!--
    -->family=Roboto+Mono:ital,wght@0,100..700;1,100..700&amp;<!--
    -->display=swap');<br>
    <br>
    body { font-family: 'Roboto Mono', monospace; }
  </blockquote>

<li>Do not highlight first time chats by overwriting the default rule
  <blockquote>
    .chat-line[data-first-msg="1"] { background-color: inherit; }
  </blockquote>

<li>Ensure that lines without 7TV emotes still have the same height
  <blockquote>
    .chat-line { line-height: 1.777778; }
  </blockquote>

<li>Hide certain bots or users by Twitch ID, name or badge
  <blockquote>
    .chat-line[data-user-id="237719657"],<br>
    .chat-line[data-display-name="nightbot" i],<br>
    .chat-line:has(.badges img.ffz-bot) {<br>
    &nbsp; display: none;<br>
    }
  </blockquote>

</ul>

<script>
'use strict';

const form = document.forms.tchat;
form.addEventListener('input', input);
form.addEventListener('submit', (event) => { event.preventDefault(); });
input();

function input() {
  const joins = form.elements.join.value.trim();
  if (!joins)
    return;
  let p = '';
  for (const j of joins.split(/\s+/))
    p += '&join=' + j;
  if (form.elements.time.value > 0)
    p += '&time=' + form.elements.time.value;
  if (form.elements.scale.value > 1)
    p += '&scale=' + form.elements.scale.value;
  if (form.elements.static.checked)
    p += '&static';
  if (form.elements.bans.checked)
    p += '&bans';
  if (form.elements.chatters.checked)
    p += '&chatters';
  if (form.elements.noPronouns.checked)
    p += '&no=pronouns';
  if (form.elements.noBttv.checked)
    p += '&no=bttv';
  if (form.elements.noFfz.checked)
    p += '&no=ffz';
  if (form.elements.no7tv.checked)
    p += '&no=7tv';
  const url = new URL('tchat/?' + p.slice(1), location);
  const a = document.createElement('a');
  a.href = url;
  a.textContent = url;
  form.elements.url.replaceChildren(a);
}
</script>
