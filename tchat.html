<!DOCTYPE html>
<meta charset=utf8>
<meta name=viewport content="width=device-width">
<title>crazysmc – tChat</title>
<link rel=stylesheet href=tchat/style.css>
<link rel=stylesheet href=tchat.css>

<h1>tChat – Twitch chat overlay for OBS or browser</h1>

<aside>

<p class=chat-line>
  <span class=badges>
    <img alt=[broadcaster/1]
         src=https://static-cdn.jtvnw.net/badges/v1/5527c58c-fb7d-422d-b71b-f309dcb85cc1/1
         ><!--
 --><img alt=[clip-the-halls/1]
         src=https://static-cdn.jtvnw.net/badges/v1/ce9e266a-f490-4fb2-9989-aee20036bfa5/1
         ><!--
 --><span class=pronouns>He/Him</span>
  </span>
  <span class=nick style=color:springgreen>crazysmc</span>
  <span class=message>this is a chat message</span>

<p class=chat-line>
  <span class=badges>
    <img alt=[broadcaster/1]
         src=https://static-cdn.jtvnw.net/badges/v1/5527c58c-fb7d-422d-b71b-f309dcb85cc1/1
         ><!--
 --><img alt=[clip-the-halls/1]
         src=https://static-cdn.jtvnw.net/badges/v1/ce9e266a-f490-4fb2-9989-aee20036bfa5/1
         ><!--
 --><span class=pronouns>He/Him</span>
  </span>
  <span class=nick style=color:springgreen>crazysmc</span>
  <span class=message>
    this is a longer message containing emotes like
    <img alt=:3
         class="7tv room"
         src=https://cdn.7tv.app/emote/01FT7DPW68000C2JH1E2C62PK2/1x.avif>
    and
    <img alt=meow
         class="7tv room"
         src=https://cdn.7tv.app/emote/01F6NCKMP000052X5637DW2XDY/1x.avif>
    which will make these bots answer as well
  </span>

<p class=chat-line>
  <span class=badges>
    <img alt=[moderator/1]
         class=ffz-bot
         src=https://static-cdn.jtvnw.net/badges/v1/3267646d-33f0-4b17-b3df-f923a41db1d0/1
         ><!--
 --><img alt=[partner/1]
         src=https://static-cdn.jtvnw.net/badges/v1/d12a2e27-16f6-41d0-ab77-b780518f00a3/1
         ><!--
 --><img alt=[ffz/4]
         src=https://cdn.frankerfacez.com/badge/4/1/rounded>
  </span>
  <span class=nick style=color:#1976d2>Fossabot</span>
  <span class=message>
    <img alt=meow
         class="7tv room"
         src=https://cdn.7tv.app/emote/01F6NCKMP000052X5637DW2XDY/1x.avif>
  </span>

<p class=chat-line>
  <span class=badges>
    <img alt=[moderator/1]
         class=ffz-bot
         src=https://static-cdn.jtvnw.net/badges/v1/3267646d-33f0-4b17-b3df-f923a41db1d0/1
         ><!--
 --><img alt=[partner/1]
         src=https://static-cdn.jtvnw.net/badges/v1/d12a2e27-16f6-41d0-ab77-b780518f00a3/1
         ><!--
 --><img alt=[ffz/4]
         src=https://cdn.frankerfacez.com/badge/4/1/rounded>
  </span>
  <span class=nick style=color:#7c7ce1>Nightbot</span>
  <span class=message>
    <img alt=meow
         class="7tv room"
         src=https://cdn.7tv.app/emote/01F6NCKMP000052X5637DW2XDY/1x.avif>
  </span>

<p class="chat-line USERNOTICE">
  <span class=badges>
    <img alt=[broadcaster/1]
         src=https://static-cdn.jtvnw.net/badges/v1/5527c58c-fb7d-422d-b71b-f309dcb85cc1/1
         ><!--
 --><img alt=[clip-the-halls/1]
         src=https://static-cdn.jtvnw.net/badges/v1/ce9e266a-f490-4fb2-9989-aee20036bfa5/1
         ><!--
 --><span class=pronouns>He/Him</span>
  </span>
  <span class=nick style=color:springgreen>crazysmc</span>
  <span class=message>this is an announcement</span>

<p class="chat-line emote-notice">
  <span class=nick>crazysmc</span>
  <span class=message>added emote otag.</span>

<p class=chat-line data-first-msg=1>
  <span class=nick>FirstTimeChatter</span>
  <span class=message>
    yo bro kinda different question but can you please explain me how do
    people fill a chest with shulker boxes and when they put a hopper to the
    chest it starts filling the shulkers that are inside
  </span>

<p class=chat-line>
  <span class=badges>
    <img alt=[broadcaster/1]
         src=https://static-cdn.jtvnw.net/badges/v1/5527c58c-fb7d-422d-b71b-f309dcb85cc1/1
         ><!--
 --><img alt=[clip-the-halls/1]
         src=https://static-cdn.jtvnw.net/badges/v1/ce9e266a-f490-4fb2-9989-aee20036bfa5/1
         ><!--
 --><span class=pronouns>He/Him</span>
  </span>
  <span class=nick style=color:springgreen>crazysmc</span>
  <span class=reply>
    <i>
      this is a longer message containing emotes like :3 and meow which will
      make these bots answer as well
    </i>
    <span class=message>
      <span class="nick at" style=color:springgreen>@crazysmc</span>
      this is a reply to myself
    </span>
  </span>

</aside>

<p>Highly customisable chat reader with support for
<ul>
<li>Pronouns.Alejo.io;
<li>BetterTTV emotes, badges, glow and live updates;
<li>FrankerFaceZ emotes and badges; as well as
<li>7TV emotes, badges, name paints and live updates.
</ul>

<p>This also includes emote effects like
<em>w! meow</em>
<img alt=meow
     style=height:32px;width:64px
     src=https://cdn.7tv.app/emote/01F6NCKMP000052X5637DW2XDY/1x.avif>
or
<em>meow ffzX</em>
<img alt=meow
     class=flip-x
     src=https://cdn.7tv.app/emote/01F6NCKMP000052X5637DW2XDY/1x.avif>.

<p>Mod actions like deleting a message or clearing the chat are actioned as
soon as possible.
Announcements and sub messages are highlighted by default.

<p>First time chats are also highlighted as this information is publicly
available and many chat extensions and clients will show this.
(see Custom Styles below if you want to disable this)

<hr>

<h2>Options</h2>

<form name=tchat>

<p>
<input id=join name=join size=40>
<label for=join>
  Channel(s) to join (if multiple, separate with white-space)
</label>

<p>
<input id=time name=time type=number min=0 size=4>
<label for=time>
  Time in seconds until each message disappears again (if unset, only messages
  scrolling out the top will be removed)
</label>

<fieldset>
<legend>Image Options</legend>

<p>
<select id=scale name=scale>
  <option value=1>1.0</option>
  <option value=2>2.0</option>
  <option value=3>3.0</option>
</select>
<label for=scale>
  Size of the emotes and badges to load (the font size scales accordingly)
</label>

<p>
<input id=static name=static type=checkbox>
<label for=static>
  Replace animated emotes, badges and paints with static ones
</label>

</fieldset>

<fieldset>
<legend>Natively Hidden Details</legend>

<p>
<input id=bans name=bans type=checkbox>
<label for=bans>
  Show a notice when someone was banned/timed out (messages are still deleted
  from the chat)
</label>

<p>
<input id=chatters name=chatters type=checkbox>
<label for=chatters>
  Show chatters joining and parting from chat (not received in chats with more
  than 1,000 chatters)
</label>

</fieldset>

<fieldset>
<legend>Disable Cool Features?</legend>

<p>
<input id=noPronouns name=noPronouns type=checkbox>
<label for=noPronouns>
  Disable Pronouns.Alejo.io
</label>

<p>
<input id=noBttv name=noBttv type=checkbox>
<label for=noBttv>
  Disable BetterTTV
</label>

<p>
<input id=noFfz name=noFfz type=checkbox>
<label for=noFfz>
  Disable FrankerFaceZ
</label>

<p>
<input id=no7tv name=no7tv type=checkbox>
<label for=no7tv>
  Disable 7TV
</label>

</fieldset>

<p>
<input type=submit value="Copy to clipboard">
<output name=url></output>

</form>

<hr>

<h2>Custom Styles</h2>

<p>The structure of the document generated by the chat overlay should allow
for great customisability using added CSS snippets.

<p>Adding a new browser source in OBS will give you a default CSS that looks
like this:

<blockquote><code>
  body {
  background-color: rgba(0, 0, 0, 0);
  margin: 0px auto;
  overflow: hidden; }
</code></blockquote>

<p>This will make the overlay transparent and make sure it has no scrollbars.

<p>You can add more CSS rules to this; here are some examples:

<ol>

<li>Change the font of the page, for example to a monospace one
  <blockquote><code>
    @import
    url('https://fonts.googleapis.com/css2?<!--
    -->family=Roboto+Mono:ital,wght@0,100..700;1,100..700&amp;<!--
    -->display=swap');<br>
    <br>
    body { font-family: 'Roboto Mono', monospace; }
  </code></blockquote>

<aside class=block>
  <p class=chat-line>
    <span class=badges>
      <img alt=[broadcaster/1]
           src=https://static-cdn.jtvnw.net/badges/v1/5527c58c-fb7d-422d-b71b-f309dcb85cc1/1
           ><!--
   --><img alt=[clip-the-halls/1]
           src=https://static-cdn.jtvnw.net/badges/v1/ce9e266a-f490-4fb2-9989-aee20036bfa5/1
           ><!--
   --><span class=pronouns>He/Him</span>
    </span>
    <span class=nick style=color:springgreen>crazysmc</span>
    <span class=reply>
      <i>
        this is a longer message containing emotes like :3 and meow which
        will make these bots answer as well
      </i>
      <span class=message>
        <span class="nick at" style=color:springgreen>@crazysmc</span>
        this is a reply to myself
      </span>
    </span>
  <p class=chat-line>
    <span class=nick>FirstTimeChatter</span>
    <span class=message>
      yo bro kinda different question but can you please explain me how do
      people fill a chest with shulker boxes and when they put a hopper to the
      chest it starts filling the shulkers that are inside
    </span>
</aside>
<li>Remove the hanging indent from long messages, especially useful with long
  user names in narrow spaces (this is applied by default when the available
  width is less than 40 times the font size, depending on the scale option)
  <blockquote><code>
    .chat-line { display: block; }<br>
    .reply i { float: none; }
  </code></blockquote>

<li>Add a colon after regular chat messages that are not a /me action
  <blockquote><code>
    .PRIVMSG:not(.action) .nick::after { color: white; content: ":"; }
  </code></blockquote>

<li>Do not highlight first time chats by overwriting the default rule
  <blockquote><code>
    .chat-line[data-first-msg="1"] { background-color: inherit; }
  </code></blockquote>
<hr>

<aside>
  <img alt=[ffz/bot]
       src=https://cdn.frankerfacez.com/badge/2/1/rounded>
</aside>
<li>Hide messages by certain bots, the easiest way is by name but you can use
  other selectors as well
  <blockquote><code>
    .chat-line[data-display-name="fossabot" i],<br>
    .chat-line[data-display-name="nightbot" i] {<br>
    &nbsp; display: none;<br>
    }
  </code></blockquote>
<hr>

<li>Hide messages by their text content, for example hide commands starting
  with an exclamation mark
  <blockquote><code>
    .chat-line[data-text^="!"] { display: none; }
  </code></blockquote>

<aside>
  <img alt=[vip/1]
       src=https://static-cdn.jtvnw.net/badges/v1/b817aba4-fad8-49e2-b88a-7cc744dfa6ec/1
       >
  <img alt=[purple-pixel-heart---together-for-good-24/1]
       src=https://static-cdn.jtvnw.net/badges/v1/1afb4b76-8c34-4b7b-8beb-75f7e5d2a1ab/1
       >
  <span>→</span>
  <img alt=[vip/1]
       src=https://static-cdn.jtvnw.net/badges/v1/b817aba4-fad8-49e2-b88a-7cc744dfa6ec/1
       >
  <img alt=[purple-pixel-heart---together-for-good-24/1]
       style=filter:grayscale(.3)
       src=https://static-cdn.jtvnw.net/badges/v1/1afb4b76-8c34-4b7b-8beb-75f7e5d2a1ab/1
       >
</aside>
<li>Make the Purple Pixel Heart badge less similar to a VIP badge
  <blockquote><code>
    img[alt="[purple-pixel-heart---together-for-good-24/1]"]
    { filter: grayscale(.3); }
  </code></blockquote>
<hr>

</ol>

<script>
'use strict';

const form = document.forms.tchat;
form.addEventListener('input', input);
form.addEventListener('submit', clip);
input();

async function clip(event) {
  event.preventDefault();
  await navigator.clipboard.writeText(form.elements.url.textContent);
}

function input() {
  const joins = form.elements.join.value.trim();
  if (!joins)
    return;
  let p = '';
  for (const j of joins.split(/\s+/))
    p += '&join=' + encodeURIComponent(j);
  if (form.elements.time.value > 0)
    p += '&time=' + form.elements.time.value;
  if (form.elements.scale.value > 1)
    p += '&scale=' + form.elements.scale.value;
  if (form.elements.static.checked)
    p += '&static';
  if (form.elements.bans.checked)
    p += '&bans';
  if (form.elements.chatters.checked)
    p += '&chatters';
  if (form.elements.noPronouns.checked)
    p += '&no=pronouns';
  if (form.elements.noBttv.checked)
    p += '&no=bttv';
  if (form.elements.noFfz.checked)
    p += '&no=ffz';
  if (form.elements.no7tv.checked)
    p += '&no=7tv';
  const url = new URL('tchat/?' + p.slice(1), location);
  const a = document.createElement('a');
  a.href = url;
  a.textContent = url;
  form.elements.url.replaceChildren(a);
}
</script>
